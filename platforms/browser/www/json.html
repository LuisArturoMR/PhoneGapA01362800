<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta charset="utf-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-tap-highlight" content="no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
    <!-- This is a wide open CSP declaration. To lock this down for production, see below. -->
    <meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline'; style-src 'self' 'unsafe-inline'; media-src *" />
    <title>Homework - JSON</title>
    <script type="text/javascript" src=cordova.js></script>
    <script type="text/javascript">
      var phonegapReady = false;

      function getReady(){
        phonegapReady = true;
      }

      document.addEventListener('deviceready', getReady, false);

      // function populateHeader(jsonObj) {
      //   var myTitle = document.createElement('<title>');
      //   myTitle.textContent = jsonObj['title'];
      //   header.appendChild(myTitle);
      //
      //   var myBody = document.createElement('p');
      //   myBody.textContent = jsonObj['body'];
      //   header.appendChild(myBody);
      // }

      function showHeroes(jsonObj) {
        var heroes = jsonObj['post'];

        for (i = 0; i < heroes.length; i++) {
          var myTitle = document.createElement('title');
          var myBody = document.createElement('p');

          myTitle.textContent = heroes[i].title;
          myBody.textContent  = heroes[i].body;


          myArticle.appendChild(myTitle);
          myArticle.appendChild(myBody);
        }
      }

      var requestURL = 'https://api.myjson.com/bins/10hakx';
      var request = new XMLHttpRequest()
      request.open('GET', requestURL);

      request.responseType = 'json';
      request.send();

      request.onload = function() {
        var superHeroes = request.response;
        // populateHeader(superHeroes);
        showHeroes(superHeroes);
      }


      </script>
  </head>
  <body>
    <h1>Look this JSON</h1>
      <section>

      </section>

      <a href="index.html">Go Back</a>
      <script type="text/javascript">
        var section = document.querySelector('section');

        var requestURL = 'https://api.myjson.com/bins/10hakx';
        var request = new XMLHttpRequest()
        request.open('GET', requestURL);
        request.responseType = 'json';
        request.send();

        request.onload = function() {
          var superHeroes = request.response;
          // populateHeader(superHeroes);
          showHeroes(superHeroes);
        }

        function showHeroes(jsonObj) {
          var heroes = jsonObj['post'];

          for (i = 0; i < heroes.length; i++) {
            var myArticle = document.createElement('article');
            var myTitle = document.createElement('title');
            var myBody = document.createElement('p');

            myTitle.textContent = heroes[i].title;
            myBody.textContent  = heroes[i].body;


            myArticle.appendChild(myTitle);
            myArticle.appendChild(myBody);

            section.appendChild(myArticle);

          }
        }
      </script>
  </body>
</html>
